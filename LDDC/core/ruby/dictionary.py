# SPDX-FileCopyrightText: Copyright (C) 2024-2025 沉默の金 <cmzj@cmzj.org>
# SPDX-License-Identifier: GPL-3.0-only
"""日语歌词常用词汇词典

用于优化汉字注音算法的准确性
"""

# 词典：映射汉字词汇到对应的平假名读音
from typing import Final


class TrieNode:
    """Trie树节点"""

    __slots__ = ("children", "value")

    def __init__(self) -> None:
        self.children: dict[str, TrieNode] = {}
        self.value: tuple[str, ...] | None = None


def _build_vocab_trie(vocab: dict[str, tuple[str, ...]]) -> TrieNode:
    """从词典构建Trie树"""
    root = TrieNode()
    for word, readings in vocab.items():
        node = root
        for char in word:
            if char not in node.children:
                node.children[char] = TrieNode()
            node = node.children[char]
        node.value = readings
    return root


def find_all_prefix_matches(trie_root: TrieNode, text: str) -> list[tuple[str, tuple[str, ...]]]:
    """在Trie树中查找文本的所有前缀匹配，按长度降序排列"""
    matches = []
    node = trie_root

    current_prefix = []
    for char in text:
        if char not in node.children:
            break
        node = node.children[char]
        current_prefix.append(char)
        if node.value is not None:
            matches.append(("".join(current_prefix), node.value))

    return sorted(matches, key=lambda x: len(x[0]), reverse=True)


def find_word(trie_root: TrieNode, word: str) -> tuple[str, ...] | None:
    """在Trie树中精确查找一个词"""
    node = trie_root
    for char in word:
        if char not in node.children:
            return None
        node = node.children[char]
    return node.value


# 含汉字的词汇: (平假名注音1, 平假名注音2, ...)
JP_VOCAB_DICT: Final[dict[str, tuple[str, ...]]] = {
    "未来永劫": ("みらいえいごう",),
    "喜怒哀楽": ("きどあいらく",),
    "百花繚乱": ("ひゃっかりょうらん", "ひゃくかりょうらん"),
    "疾風迅雷": ("しっぷうじんらい",),
    "唯一無二": ("ゆいいつむに",),
    "春夏秋冬": ("しゅんかしゅうとう", "ひととせ"),
    "一期一会": ("いちごいちえ",),
    "四六時中": ("しろくじちゅう",),
    "無我夢中": ("むがむちゅう",),
    "水平線": ("すいへいせん",),
    "最終回": ("さいしゅうかい",),
    "主人公": ("しゅじんこう",),
    "一番星": ("いちばんぼし",),
    "有り難う": ("ありがとう",),
    "大丈夫": ("だいじょうぶ",),
    "御免なさい": ("ごめんなさい",),
    "如何して": ("どうして", "いかんして"),
    "万華鏡": ("まんげきょう", "かれいどすこーぷ"),
    "砂時計": ("すなどけい",),
    "向日葵": ("ひまわり",),
    "蜃気楼": ("しんきろう",),
    "流れ星": ("ながれぼし",),
    "道標": ("みちしるべ", "どうひょう", "みちべい"),
    "子守唄": ("こもりうた",),
    "五月雨": ("さみだれ", "さつきあめ"),
    "木漏れ日": ("こもれび",),
    "雨上がり": ("あめあがり",),
    "片想い": ("かたおもい",),
    "三日月": ("みかづき",),
    "宵待草": ("よいまちぐさ",),
    "悪戯": ("いたずら",),
    "不条理": ("ふじょうり",),
    "闘志": ("とうし",),
    "女の子": ("おんなのこ",),
    "男の子": ("おとこのこ",),
    "誕生日": ("たんじょうび",),
    # 2文字 (動詞・形容詞含む)
    "紅る": ("べにる","くれる"),
    "溢れる": ("あふれる",),
    "あぶり出す": ("あぶりだす",),
    "諦める": ("あきらめる",),
    "抱き締める": ("だきしめる",),
    "踏み出す": ("ふみだす",),
    "頑張って": ("がんばって",),
    "始まる": ("はじまる",),
    "始める": ("はじめる",),
    "生きる": ("いきる", "いきてる", "いかす"),
    "生きてる": ("いきてる",),
    "彩る": ("いろどる",),
    "感じる": ("かんじる",),
    "輝く": ("かがやく",),
    "傷付く": ("きずつく",),
    "泣かないで": ("なかないで",),
    "逃げ出す": ("にげだす",),
    "教える": ("おしえる",),
    "探す": ("さがす",),
    "信じる": ("しんじる",),
    "照らす": ("てらす",),
    "閉じる": ("とじる",),
    "止める": ("とめる",),
    "作る": ("つくる",),
    "忘れない": ("わすれない",),
    "忘れる": ("わすれる",),
    "分かる": ("わかる",),
    "新しい": ("あたらしい",),
    "暖かい": ("あたたかい",),
    "小さい": ("ちいさい", "ちいさな"),
    "小さな": ("ちいさな",),
    "深い": ("ふかい",),
    "悲しい": ("かなしい",),
    "嫌い": ("きらい",),
    "綺麗": ("きれい",),
    "怖い": ("こわい",),
    "眩しい": ("まぶしい",),
    "難しい": ("むずかしい",),
    "同じ": ("おなじ",),
    "大きい": ("おおきい", "おおきな"),
    "大きな": ("おおきな",),
    "遅い": ("おそい",),
    "寂しい": ("さびしい", "さみしい"),
    "静か": ("しずか",),
    "素晴らしい": ("すばらしい",),
    "素敵": ("すてき",),
    "高い": ("たかい",),
    "楽しい": ("たのしい",),
    "強い": ("つよい",),
    "美しい": ("うつくしい",),
    "優しい": ("やさしい",),
    "永遠": ("えいえん", "とわ", "とこしえ"),
    "運命": ("うんめい", "さだめ"),
    "宿命": ("しゅくめい", "さだめ"),
    "生命": ("せいめい", "いのち"),
    "未来": ("みらい", "あす", "あした"),
    "現実": ("げんじつ", "りある", "いま", "うつつ"),
    "理想": ("りそう",),
    "地球": ("ちきゅう", "ほし"),
    "宇宙": ("うちゅう", "そら"),
    "銀河": ("ぎんが",),
    "世界": ("せかい",),
    "物語": ("ものがたり", "すとーりー", "ストーリー"),
    "神話": ("しんわ", "みんわ", "ものがたり"),
    "旋律": ("せんりつ", "めろでぃー"),
    "本気": ("ほんき", "まじ"),
    "嗚呼": ("ああ", "アー"),
    "明日": ("あした", "あす", "みょうにち"),
    "昨日": ("きのう", "さくじつ"),
    "今日": ("きょう", "こんにち"),
    "刹那": ("せつな", "しゅんかん"),
    "瞬間": ("しゅんかん", "とき"),
    "時間": ("じかん", "とき"),
    "記憶": ("きおく", "めもりー"),
    "追憶": ("ついおく",),
    "感情": ("かんじょう",),
    "愛情": ("あいじょう",),
    "友情": ("ゆうじょう",),
    "情熱": ("じょうねつ", "ぱっしょん"),
    "衝動": ("しょうどう",),
    "鼓動": ("こどう", "どきどき"),
    "奇跡": ("きせき",),
    "軌跡": ("きせき",),
    "希望": ("きぼう", "ひかり", "のぞみ"),
    "絶望": ("ぜつぼう", "やみ"),
    "孤独": ("こどく",),
    "自由": ("じゆう",),
    "勇気": ("ゆうき",),
    "元気": ("げんき",),
    "笑顔": ("えがお",),
    "素顔": ("すがお",),
    "涙": ("なみだ",),
    "言葉": ("ことば",),
    "約束": ("やくそく",),
    "秘密": ("ひみつ",),
    "宝石": ("ほうせき",),
    "欠片": ("かけら",),
    "景色": ("けしき",),
    "風景": ("ふうけい",),
    "太陽": ("たいよう",),
    "大空": ("おおぞら", "そら"),
    "黎明": ("れいめい", "よあけ"),
    "暁": ("あかつき",),
    "黄昏": ("たそがれ",),
    "夕暮れ": ("ゆうぐれ",),
    "夜空": ("よぞら",),
    "星空": ("ほしぞら",),
    "青空": ("あおぞら",),
    "夕日": ("ゆうひ",),
    "朝日": ("あさひ",),
    "夕闇": ("ゆうやみ",),
    "稲妻": ("いなずま",),
    "陽炎": ("かげろう",),
    "疾風": ("はやて", "しっぷう"),
    "足跡": ("あしあと",),
    "傷跡": ("きずあと",),
    "坂道": ("さかみち",),
    "痛み": ("いたみ",),
    "苦しみ": ("くるしみ",),
    "温もり": ("ぬくもり",),
    "幸せ": ("しあわせ",),
    "喜び": ("よろこび",),
    "悲しみ": ("かなしみ",),
    "憂い": ("うれい",),
    "叫び": ("さけび",),
    "祈り": ("いのり",),
    "誓い": ("ちかい",),
    "魔法": ("まほう",),
    "音楽": ("おんがく",),
    "思い出": ("おもいで",),
    "忘却": ("ぼうきゃく",),
    "存在": ("そんざい",),
    "証明": ("しょうめい",),
    "絶対": ("ぜったい",),
    "真実": ("しんじつ",),
    "正義": ("せいぎ",),
    "悪意": ("あくい",),
    "矛盾": ("むじゅん",),
    "幻想": ("げんそう",),
    "幻": ("まぼろし",),
    "残像": ("ざんぞう",),
    "残響": ("ざんきょう",),
    "薔薇": ("ばら", "しょうび"),
    "桜": ("さくら",),
    "花火": ("はなび",),
    "花束": ("はなたば",),
    "吹雪": ("ふぶき",),
    "木枯らし": ("こがらし",),
    "気持": ("きもち",),
    "心臓": ("しんぞう", "はーと"),
    "瞳": ("ひとみ",),
    "鼓膜": ("こまく",),
    "唇": ("くちびる",),
    "指先": ("ゆびさき",),
    "背中": ("せなか",),
    "右手": ("みぎて",),
    "左手": ("ひだりて",),
    "両手": ("りょうて",),
    "季節": ("きせつ",),
    "時代": ("じだい",),
    "青春": ("せいしゅん",),
    "大人": ("おとな",),
    "子供": ("こども",),
    "一人": ("ひとり",),
    "1人": ("ひとり",),
    "仲間": ("なかま",),
    "相棒": ("あいぼう",),
    "何故": ("なぜ", "なにゆえ"),
    "理由": ("りゆう", "わけ"),
    "答え": ("こたえ",),
    "意味": ("いみ",),
    "価値": ("かち",),
    "未来図": ("みらいず",),
    "地図": ("ちず",),
    "迷路": ("めいろ",),
    "迷宮": ("めいきゅう",),
    "出口": ("でぐち",),
    "入口": ("いりぐち",),
    "始まり": ("はじまり",),
    "終わり": ("おわり",),
    "続き": ("つづき",),
    "出逢い": ("であい",),
    "出会う": ("であう",),
    "別れ": ("わかれ",),
    "再会": ("さいかい",),
    "贖罪": ("しょくざい",),
    "螺旋": ("らせん",),
    "純粋": ("じゅんすい",),
    "無垢": ("むく",),
    "貴方": ("あなた",),
    "彼処": ("あそこ",),
    "駄目": ("だめ",),
    "出来ない": ("できない",),
    "出来る": ("できる",),
    "故郷": ("ふるさと", "こきょう", "くに"),
    "学校": ("がっこう",),
    "平和": ("へいわ",),
    "部屋": ("へや",),
    "日々": ("ひび",),
    "響き": ("ひびき",),
    "必然": ("ひつぜん",),
    "本当": ("ほんとう",),
    "苺": ("いちご",),
    "一歩": ("いっぽ",),
    "一生": ("いっしょう",),
    "一緒": ("いっしょ",),
    "何時": ("いつ", "なんじ"),
    "何時も": ("いつも",),
    "一体": ("いったい",),
    "自分": ("じぶん",),
    "人生": ("じんせい",),
    "準備": ("じゅんび",),
    "十分": ("じゅうぶん",),
    "勝ち": ("かち",),
    "帰る": ("かえる",),
    "神様": ("かみさま",),
    "彼方": ("かなた",),
    "体": ("からだ",),
    "家族": ("かぞく",),
    "携帯": ("けいたい",),
    "結婚": ("けっこん",),
    "喧嘩": ("けんか",),
    "屹度": ("きっと",),
    "此処": ("ここ",),
    "此れ": ("これ",),
    "高校": ("こうこう",),
    "下さい": ("ください",),
    "曇り": ("くもり",),
    "未だ": ("まだ",),
    "真ん中": ("まんなか",),
    "恵み": ("めぐみ",),
    "味覚": ("みかく",),
    "無限": ("むげん",),
    "無意味": ("むいみ",),
    "向こう": ("むこう",),
    "流れる": ("ながれる",),
    "何でも": ("なんでも",),
    "何も": ("なにも",),
    "成りたい": ("なりたい",),
    "成る": ("なる",),
    "匂い": ("におい",),
    "人間": ("にんげん",),
    "お願い": ("おねがい",),
    "女": ("おんな",),
    "俺たち": ("おれたち",),
    "教えて": ("おしえて",),
    "男": ("おとこ",),
    "お休み": ("おやすみ",),
    "理解": ("りかい",),
    "然し": ("しかし",),
    "為": ("ため",),
    "側にいる": ("そばにいる", "はたにいる"),
    "其処": ("そこ",),
    "其れ": ("それ",),
    "其れでも": ("それでも",),
    "而して": ("そして",),
    "全て": ("すべて",),
    "隙間": ("すきま",),
    "少し": ("すこし",),
    "済みません": ("すみません",),
    "為る": ("する", "なす"),
    "宝": ("たから",),
    "戦い": ("たたかい",),
    "手紙": ("てがみ",),
    "天使": ("てんし",),
    "飛ぶ": ("とぶ", "とんで"),
    "扉": ("とびら",),
    "友達": ("ともだち",),
    "隣": ("となり",),
    "取る": ("とる",),
    "迚も": ("とても",),
    "翼": ("つばさ",),
    "嘘": ("うそ",),
    "歌う": ("うたう",),
    "現つ": ("うつつ",),
    "夕焼け": ("ゆうやけ",),
    "愛": ("あい", "いとしさ", "ラブ", "めぐみ"),
    "恋": ("こい",),
    "夢": ("ゆめ",),
    "心": ("こころ", "しん", "はーと"),
    "魂": ("たましい", "そうる", "こころ", "こん", "たま"),
    "君": ("きみ",),
    "僕": ("ぼく",),
    "私": ("わたし", "わたくし"),
    "俺": ("おれ",),
    "空": ("そら", "くう", "から"),
    "海": ("うみ",),
    "星": ("ほし",),
    "陽": ("ひ",),
    "日": ("ひ",),
    "火": ("ひ", "ほ"),
    "光": ("ひかり",),
    "影": ("かげ",),
    "闇": ("やみ",),
    "風": ("かぜ",),
    "雨": ("あめ",),
    "雪": ("ゆき",),
    "花": ("はな",),
    "詩": ("うた", "し"),
    "歌": ("うた",),
    "唄": ("うた",),
    "音": ("おと", "ね"),
    "声": ("こえ",),
    "夜": ("よる", "よ"),
    "朝": ("あさ",),
    "今": ("いま",),
    "時": ("とき",),
    "人": ("ひと",),
    "絆": ("きずな", "ほだし"),
    "罪": ("つみ",),
    "罰": ("ばつ",),
    "傷": ("きず",),
    "証": ("あかし",),
    "命": ("いのち",),
    "生": ("せい", "しょう", "い", "なま", "いきる", "うまれる", "はえる", "おう"),
    "死": ("し",),
    "炎": ("ほのお", "ほむら"),
    "焔": ("ほのお", "ほむら"),
    "熱": ("ねつ",),
    "氷": ("こおり",),
    "色": ("いろ",),
    "彩": ("いろどり", "あや"),
    "赤": ("あか",),
    "青": ("あお",),
    "白": ("しろ",),
    "黒": ("くろ",),
    "手": ("て",),
    "目": ("め",),
    "耳": ("みみ",),
    "名": ("な",),
    "何": ("なに", "なん"),
    "誰": ("だれ",),
    "天": ("てん", "そら"),
    "地": ("ち",),
    "街": ("まち",),
    "駅": ("えき",),
    "鍵": ("かぎ",),
    "壁": ("かべ",),
    "旅": ("たび",),
    "羽": ("はね",),
    "神": ("かみ",),
    "側": ("そば",),
    "傍": ("そば",),
    "何処": ("どこ", "いずこ"),
    "故": ("ゆえ",),
    "頬": ("ほお", "ほほ"),
    "胸": ("むね",),
    "背": ("せ", "せい", "そむく"),
    "願": ("ねがい", "ねがう"),
    "灯": ("ひ", "あかり", "ともしび"),
    "灯り": ("あかり",),
    "儚": ("はかない", "はかなさ"),
    "姿": ("すがた",),
    "紡": ("つむぐ",),
    "巡": ("めぐる",),
    "上げる": ("あげる",),
    "秋": ("あき",),
    "歩く": ("あるく",),
    "足": ("あし",),
    "頭": ("あたま",),
    "後": ("あと",),
    "会う": ("あう",),
    "会いたい": ("あいたい",),
    "馬鹿": ("ばか",),
    "場所": ("ばしょ",),
    "僕ら": ("ぼくら",),
    "違う": ("ちがう",),
    "力": ("ちから",),
    "地下鉄": ("ちかてつ",),
    "丁度": ("ちょうど",),
    "大好き": ("だいすき",),
    "電話": ("でんわ",),
    "服": ("ふく",),
    "吹く": ("ふく",),
    "振り": ("ふり",),
    "二人": ("ふたり",),
    "2人": ("ふたり",),
    "冬": ("ふゆ",),
    "話": ("はなし",),
    "春": ("はる",),
    "走る": ("はしる",),
    "早い": ("はやい",),
    "早く": ("はやく",),
    "左": ("ひだり",),
    "暇": ("ひま",),
    "広がる": ("ひろがる",),
    "本": ("ほん",),
    "欲しい": ("ほしい",),
    "一": ("いち",),
    "一番": ("いちばん",),
    "家": ("いえ",),
    "良い": ("いい",),
    "行く": ("いく",),
    "行け": ("いけ",),
    "行こう": ("いこう",),
    "痛い": ("いたい",),
    "嫌": ("いや",),
    "髪": ("かみ",),
    "傘": ("かさ",),
    "川": ("かわ",),
    "黄色": ("きいろ",),
    "事": ("こと",),
    "口": ("くち",),
    "雲": ("くも",),
    "来る": ("くる",),
    "靴": ("くつ",),
    "町": ("まち",),
    "窓": ("まど",),
    "負けない": ("まけない",),
    "負ける": ("まける",),
    "儘": ("まま",),
    "守る": ("まもる",),
    "又": ("また",),
    "道": ("みち",),
    "右": ("みぎ",),
    "見る": ("みる",),
    "蜜": ("みつ",),
    "水": ("みず",),
    "戻る": ("もどる",),
    "物": ("もの",),
    "中": ("なか",),
    "泣く": ("なく",),
    "夏": ("なつ",),
    "長い": ("ながい",),
    "猫": ("ねこ",),
    "眠る": ("ねむる",),
    "虹": ("にじ",),
    "お金": ("おかね",),
    "下": ("した",),
    "好き": ("すき",),
    "卵": ("たまご",),
    "谷間": ("たにま",),
    "鳥": ("とり",),
    "次ぐ": ("つぐ",),
    "月": ("つき",),
    "上": ("うえ",),
    "山": ("やま",),
    "呼んで": ("よんで",),
    "指": ("ゆび",),
    "有": ("ゆう",),
    "夜明け": ("よあけ",),
    "宿る": ("やどる",),
    "響き合う": ("ひびきあう",),
    "刻む": ("きざむ",),
    "求める": ("もとめる",),
    "届く": ("とどく",),
    "燃やす": ("もやす",),
    "消し去る": ("けしさる",),
    "宿す": ("やどす",),
    "繋がる": ("つながる",),
    "信じ合う": ("しんじあう",),
    "進む": ("すすむ",),
    "変える": ("かえる",),
    "掴む": ("つかむ",),
    "描く": ("えがく",),
    "突き進む": ("つきすすむ",),
    "駆け抜ける": ("かけぬける",),
    "誓う": ("ちかう",),
    "映る": ("うつる",),
    "壊す": ("こわす",),
    "手繰り寄せる": ("たぐりよせる",),
    "内緒": ("ないしょ",),
    "簡単": ("かんたん",),
    "可能": ("かのう",),
    "異次元": ("いじげん",),
    "趣味": ("しゅみ",),
    "本音": ("ほんね",),
    "日常": ("にちじょう",),
    "交差点": ("こうさてん",),
    "角度": ("かくど",),
    "不思議": ("ふしぎ",),
    "航路": ("こうろ",),
    "惑星": ("わくせい",),
    "奇想天外": ("きそうてんがい",),
    "自転車": ("じてんしゃ",),
    "全部": ("ぜんぶ",),
    "会議": ("かいぎ",),
    "過去": ("かこ",),
    "写真": ("しゃしん",),
    "問題": ("もんだい",),
    "皆": ("みんな", "みな", "みなさま"),
    "同じ未来": ("おなじみらい",),
    "この場所": ("このばしょ",),
    "君の笑顔": ("きみのえがお",),
}


# 构建并导出词汇Trie树
JP_VOCAB_TRIE: Final[TrieNode] = _build_vocab_trie(JP_VOCAB_DICT)
